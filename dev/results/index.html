<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Result Data · OPFLearn</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://NREL.github.io/OPFLearn.jl/results/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="OPFLearn logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">OPFLearn</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../quickstartguide/">Getting Started</a></li><li><a class="tocitem" href="../framework/">OPFLearn Framework</a></li><li class="is-active"><a class="tocitem" href>Result Data</a><ul class="internal"><li><a class="tocitem" href="#Result-Dataset-Dictionary"><span>Result Dataset Dictionary</span></a></li><li><a class="tocitem" href="#additional_results"><span>Additional Results</span></a></li><li><a class="tocitem" href="#Exporting-Results"><span>Exporting Results</span></a></li></ul></li><li><a class="tocitem" href="../dataset/">Dataset Format</a></li><li><a class="tocitem" href="../distributed/">Distributed Processing</a></li><li><a class="tocitem" href="../python/">Python Interface</a></li></ul></li><li><span class="tocitem">Library</span><ul><li><a class="tocitem" href="../datasetcreation/">Dataset Creation</a></li><li><a class="tocitem" href="../saving/">Exporting Datasets</a></li><li><a class="tocitem" href="../sampling/">Sampling</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Result Data</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Result Data</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/NREL/OPFLearn.jl/blob/master/docs/src/results.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="OPFLearn-Result-Data"><a class="docs-heading-anchor" href="#OPFLearn-Result-Data">OPFLearn Result Data</a><a id="OPFLearn-Result-Data-1"></a><a class="docs-heading-anchor-permalink" href="#OPFLearn-Result-Data" title="Permalink"></a></h1><h2 id="Result-Dataset-Dictionary"><a class="docs-heading-anchor" href="#Result-Dataset-Dictionary">Result Dataset Dictionary</a><a id="Result-Dataset-Dictionary-1"></a><a class="docs-heading-anchor-permalink" href="#Result-Dataset-Dictionary" title="Permalink"></a></h2><p>Resulting datasets are returned as a dictionary of values. This dictionary uses strings as key values. A default result dictionary contains inputs, outputs, and duals data, structured as follows.</p><pre><code class="language-json hljs">{
&quot;inputs&quot;:&lt;Dictionary&gt;,  # input variables to the AC OPF problem
&quot;outputs&quot;:&lt;Dictionary&gt;, # AC OPF solutions corresponding to the input load profiles
&quot;duals&quot;:&lt;Dictionary&gt;,   # lagrangian dual values found when solving the AC OPF problem
...
}</code></pre><p>Each of these default result keys maps to a dictionary containing variables from the AC OPF problem that map to an array of result values for each sample in the dataset. For example, the inputs, <code>results[&quot;inputs&quot;]</code>, would return the following dictionary with active and reactive load variables mapping to a 2-dimensional array of values.</p><pre><code class="nohighlight hljs">{
&quot;pl&quot;: [...],
&quot;ql&quot;: [...],
}</code></pre><p>Then looking at the data for the active load with key &quot;pl&quot;, <code>results[&quot;inputs&quot;][&quot;pl&quot;]</code>, would return an array structured as follows,</p><pre><code class="nohighlight hljs">sample 1: [pl_1, pl_2, ..., pl_n]
sample 2: [pl_1, pl_2, ..., pl_n]
sample 3: [pl_1, pl_2, ..., pl_n]
...
sample K: [pl_1, pl_2, ..., pl_n]</code></pre><p>where pl_n indicates the value of the active power demand at bus n. </p><h3 id="Specifying-Results"><a class="docs-heading-anchor" href="#Specifying-Results">Specifying Results</a><a id="Specifying-Results-1"></a><a class="docs-heading-anchor-permalink" href="#Specifying-Results" title="Permalink"></a></h3><p>By default input, output, and dual result data for all variables are saved to the results object.  To reduce the size of the result object a subsection of the variables to save can be provided in the create samples call.  For example, if you are only interested in saving the generator active power, <code>pg</code>, and generator bus voltage magnitudes, <code>vm_gen</code>, the following call can be made,</p><pre><code class="nohighlight hljs">outputs = [&quot;pg&quot;, &quot;vm_gen&quot;]
results = create_samples(&quot;pglib_opf_case5_pjm.m&quot;, N, output_vars=outputs)</code></pre><p>This results object will only contain subdictionaries for these two specified output varaibles. The input and dual results will still contain all the default variables, unless also specified.</p><p>All the available result variables can be seen in this table,</p><table>
  <tbody>
    <tr>
		<th><b>Input Data</b></th>
		<th><b>Output Data</b></th>
		<th><b>Dual Data</b></th>
	</tr>
	
    <tr>
		<td>
			<ul><li>Load Active Power (pl)</li><li>Load Reactive Power (ql)
			</li></ul>
		</td>
		<td>	
			<ul><li>Generator Active Power (pg)</li><li>Generator Reactive Power (qg)</li><li>Generator Bus Voltage Magnitude (vm_gen)</li><li>Bus Voltage (v_bus)</li><li>Edge To Active Power (p_to)</li><li>Edge From Active Power (p_fr)</li><li>Edge To Reactive Power (q_to)</li><li>Edge From Reactive Power (q_fr)</li></ul>
		</td>
		<td>
			<ul><li>Min Bus Voltage (v_min)</li><li>Max Bus Voltage (v_max)</li><li>Min Generator Active Power (pg_min)</li><li>Max Generator Active Power (pg_max)</li><li>Min Generator Reactive Power (qg_min)</li><li>Max Generator Reactive Power (qg_max)</li><li>Min Edge To Active Power (p_to_min)</li><li>Max Edge To Active Power (p_to_max)</li><li>Min Edge From Active Power (p_fr_min)</li><li>Max Edge From Active Power (p_fr_max)</li><li>Min Edge From Reactive Power (q_fr_min)</li><li>Max Edge From Reactive Power (q_fr_max)</li></ul>
		</td>
	</tr>
  </tbody>
</table><h3 id="Converting-to-an-Array"><a class="docs-heading-anchor" href="#Converting-to-an-Array">Converting to an Array</a><a id="Converting-to-an-Array-1"></a><a class="docs-heading-anchor-permalink" href="#Converting-to-an-Array" title="Permalink"></a></h3><p>The result data dictionary can be converted to an array for easier data analysis with the <a href="../saving/#OPFLearn.results_to_array-Tuple{Any, Any, Any}"><code>results_to_array</code></a> function.</p><h2 id="additional_results"><a class="docs-heading-anchor" href="#additional_results">Additional Results</a><a id="additional_results-1"></a><a class="docs-heading-anchor-permalink" href="#additional_results" title="Permalink"></a></h2><p>Additional result parameters can be saved if specified in the function call to create the dataset. The additional results parameters are, </p><ul><li>Iteration Statistics:</li><li>Sampling Polytope:  </li><li>Found Maximum Loads: </li><li>Infeasible Inputs: </li></ul><p>Arguments can be passed in to the dataset creation function, to have these additional results in the results dictionary.</p><h3 id="Iteration-Statistics"><a class="docs-heading-anchor" href="#Iteration-Statistics">Iteration Statistics</a><a id="Iteration-Statistics-1"></a><a class="docs-heading-anchor-permalink" href="#Iteration-Statistics" title="Permalink"></a></h3><p>To save iteration statistics the <code>stat_track</code> argument can be specified as an Integer from 1 to 3.</p><pre><code class="language-julia hljs">results = create_samples(net_file, K, stat_track=1)</code></pre><p>Specifying a larger integer will save more information as follows,</p><table><tr><th style="text-align: right"><strong>Stat Track Level</strong></th><th style="text-align: right"><strong>Additional Data Saved</strong></th></tr><tr><td style="text-align: right">0</td><td style="text-align: right">None</td></tr><tr><td style="text-align: right">1</td><td style="text-align: right">New Unique Active Set, New Infeasibility Certificate, Feasible Sample, Added Sample, Iteration Time, Increased Set Variance</td></tr><tr><td style="text-align: right">2</td><td style="text-align: right">Unique Active Sets in The Dataset</td></tr><tr><td style="text-align: right">3</td><td style="text-align: right">Unique Active Set Covariance Matrices</td></tr></table><p>This information can then be found in the results dictionary with <code>results[&quot;stats&quot;]</code>. </p><div class="admonition is-category-warn"><header class="admonition-header">Warn</header><div class="admonition-body"><p>For large datasets or networks using a level greater than 1 will likely result in a large amount of memory usage and slow down the dataset creation process.</p></div></div><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Variance tracking needs to be turned on with the boolean <code>variance</code> argument for data to be saved with <code>stat_track=3</code>.</p></div></div><h3 id="Sampling-Polytope"><a class="docs-heading-anchor" href="#Sampling-Polytope">Sampling Polytope</a><a id="Sampling-Polytope-1"></a><a class="docs-heading-anchor-permalink" href="#Sampling-Polytope" title="Permalink"></a></h3><p>To save the polytope that was used for sampling the <code>save_certs</code> argument should be specified as <code>true</code>.</p><pre><code class="language-julia hljs">results = create_samples(net_file, K, save_certs=true)</code></pre><p>This will save the final definition of the polytope used for sampling input load demands, including the infeasibility certificates added to the initial sampling space. The polytope is defined by Ax &lt;= b, where A and b are matrices and x is a vector of the demands at each load bus in the network.  Each row of the A and b matrices specifies a hyperplane contraint that defines the input load space that samples are pulled from. These matrices are stored as arrays at <code>results[&quot;polytope&quot;][&quot;A&quot;]</code> and <code>results[&quot;polytope&quot;][&quot;b&quot;]</code>. These matrices can be passed into a new call to a dataset creation function, with the arguments <code>A</code> and <code>b</code>, to initialize the sampling polytope with this polytope containing the infeasibility certificates found during the last run. </p><h3 id="Found-Maximum-Loads"><a class="docs-heading-anchor" href="#Found-Maximum-Loads">Found Maximum Loads</a><a id="Found-Maximum-Loads-1"></a><a class="docs-heading-anchor-permalink" href="#Found-Maximum-Loads" title="Permalink"></a></h3><p>To save the maximum loads used to initialize the input load space the <code>save_max_load</code> argument should be specified as <code>true</code>.</p><pre><code class="language-julia hljs">results = create_samples(net_file, K, save_max_load=true)</code></pre><p>This will store an array of maximum loads found at each bus in the network at <code>results[&quot;load_constraints&quot;][&quot;pl_max&quot;]</code>.  This array can be provided as an argument, <code>pl_max</code>, to a dataset creation function, when using the same network, to reduce the dataset creation initialization time.</p><h3 id="Infeasible-Inputs"><a class="docs-heading-anchor" href="#Infeasible-Inputs">Infeasible Inputs</a><a id="Infeasible-Inputs-1"></a><a class="docs-heading-anchor-permalink" href="#Infeasible-Inputs" title="Permalink"></a></h3><p>To save the infeasible AC OPF load samples found throughout dataset creation the <code>save_infeasible</code> argument should be specified as <code>true</code>.</p><pre><code class="language-julia hljs">results = create_samples(net_file, K, save_infeasible=true)</code></pre><p>These results, at <code>results[&quot;infeasible_inputs&quot;]</code>, contain all AC OPF infeasible load profiles input values found during the creation of a dataset.</p><h2 id="Exporting-Results"><a class="docs-heading-anchor" href="#Exporting-Results">Exporting Results</a><a id="Exporting-Results-1"></a><a class="docs-heading-anchor-permalink" href="#Exporting-Results" title="Permalink"></a></h2><p>Multiple functions are available to save OPFLearn datasets and other result data to &#39;csv&#39; files.</p><h3 id="Dataset"><a class="docs-heading-anchor" href="#Dataset">Dataset</a><a id="Dataset-1"></a><a class="docs-heading-anchor-permalink" href="#Dataset" title="Permalink"></a></h3><p>To export an AC OPF dataset the <code>save_results_csv</code> function can be used as follows, </p><pre><code class="language-julia hljs">results = create_samples(net_file, K)
file_name = &quot;dataset&quot;
save_results_csv(results, file_name)</code></pre><p>where <code>results</code> contains the dataset to be saved, and file_name is the name that the file will be saved as. The format of the exported results &#39;csv&#39; file is explained in the <a href="../dataset/#Dataset-Format">Dataset Format</a> Section</p><h3 id="Statistics"><a class="docs-heading-anchor" href="#Statistics">Statistics</a><a id="Statistics-1"></a><a class="docs-heading-anchor-permalink" href="#Statistics" title="Permalink"></a></h3><p>Similarly, to export the iteration statistics the function <code>save_stats</code> can be used as follows,</p><pre><code class="language-julia hljs">stats = results[&quot;stats&quot;]
save_stats(stats, file_name)</code></pre><p>Note that this only saves the statistics stored with <code>stat_track=1</code>.</p><h3 id="Polytope"><a class="docs-heading-anchor" href="#Polytope">Polytope</a><a id="Polytope-1"></a><a class="docs-heading-anchor-permalink" href="#Polytope" title="Permalink"></a></h3><p>To export the Polytope A and b matrices the function <code>save_polytope</code> can be used as follows,</p><pre><code class="language-julia hljs">A = results[&quot;polytope&quot;][&quot;A&quot;]
b = results[&quot;polytope&quot;][&quot;b&quot;]
save_polytope(A, b, file_name)</code></pre><p>Note that this saves the A and b matrices in two seperate &#39;csv&#39; files.</p><h3 id="Save-While-Processing"><a class="docs-heading-anchor" href="#Save-While-Processing">Save While Processing</a><a id="Save-While-Processing-1"></a><a class="docs-heading-anchor-permalink" href="#Save-While-Processing" title="Permalink"></a></h3><p>The <code>save_while</code> argument can be specified as <code>true</code> to save all result values to files during the creation of the AC OPF dataset. This ensures that dataset results are not lost if an error is encountered during the creation of large datasets.  All values are saved to &#39;csv&#39; files. </p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../framework/">« OPFLearn Framework</a><a class="docs-footer-nextpage" href="../dataset/">Dataset Format »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.5 on <span class="colophon-date" title="Monday 25 October 2021 06:11">Monday 25 October 2021</span>. Using Julia version 1.6.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
