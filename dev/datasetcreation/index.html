<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Dataset Creation · OPFLearn</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://NREL.github.io/OPFLearn.jl/datasetcreation/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="OPFLearn logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">OPFLearn</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../quickstartguide/">Getting Started</a></li><li><a class="tocitem" href="../framework/">OPFLearn Framework</a></li><li><a class="tocitem" href="../results/">Result Data</a></li><li><a class="tocitem" href="../dataset/">Dataset Format</a></li><li><a class="tocitem" href="../distributed/">Distributed Processing</a></li><li><a class="tocitem" href="../python/">Python Interface</a></li></ul></li><li><span class="tocitem">Library</span><ul><li class="is-active"><a class="tocitem" href>Dataset Creation</a><ul class="internal"><li><a class="tocitem" href="#Distributed-Processing"><span>Distributed Processing</span></a></li></ul></li><li><a class="tocitem" href="../saving/">Exporting Datasets</a></li><li><a class="tocitem" href="../sampling/">Sampling</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Library</a></li><li class="is-active"><a href>Dataset Creation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Dataset Creation</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/NREL/OPFLearn.jl/blob/master/docs/src/datasetcreation.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Dataset-Creation-Functions"><a class="docs-heading-anchor" href="#Dataset-Creation-Functions">Dataset Creation Functions</a><a id="Dataset-Creation-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Dataset-Creation-Functions" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-binding" id="OPFLearn.create_samples" href="#OPFLearn.create_samples"><code>OPFLearn.create_samples</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">create_samples(net, K; &lt;keyword arguments&gt;)</code></pre><p>Creates an AC OPF dataset for the given PowerModels network dictionary. Generates samples until one of the given stopping criteria is met.  Takes options to determine how to sample points, what information to save, and what information is printed.</p><p><strong>Examples</strong></p><pre><code class="nohighlight hljs">julia&gt; results = create_samples(&quot;case5.m&quot;, 100; T=1000, net_path=&quot;data&quot;)</code></pre><p><strong>Arguments</strong></p><ul><li>&#39;net::Dict&#39;: network information stored in a PowerModels.jl format specified dictionary</li><li>&#39;K::Integer&#39;: the maximum number of samples before stopping sampling</li><li>&#39;U::Float&#39;: the minimum % of unique active sets sampled in the previous 1 / U samples to continue sampling</li><li>&#39;S::Float&#39;: the minimum % of saved samples in the previous 1 / L samples to continue sampling</li><li>&#39;V::Float&#39;: the minimum % of feasible samples that increase the variance of the dataset in the previous 1 / L samples to continue sampling</li><li>&#39;T::Integer&#39;: the maximum time for the sampler to run in seconds.</li><li>&#39;max_iter::Integer&#39;: maximum number of iterations for the sampler to run for.</li><li>&#39;sampler::Function&#39;: the sampling function to use. This function must take arguements A and b, and can take optional arguments.</li><li>&#39;sampler_opts::Dict&#39;: a dictionary of optional arguments to pass to the sampler function.</li><li>&#39;A::Array&#39;: defines the initial sampling space polytope Ax&lt;=b. If not provided, initializes to a default.</li><li>&#39;b::Array&#39;: defines the initial sampling space polytope Ax&lt;=b. If not provided, initializes to a default.</li><li>&#39;pd_max::Array&#39;: the maximum active load values to use when initializing the sampling space and constraining the loads. If nothing, finds the maximum load at each bus with the given relaxed model type.</li><li>&#39;pd_min::Array&#39;: the minimum active load values to use when initializing the sampling space and constraining the loads. If nothing, this is set to 0 for all loads.</li><li>&#39;pf_min::Array/Float:&#39; the minimum power factor for all loads in the system (Number) or an array of minimum power factors for each load in the system.</li><li>&#39;pf_lagging::Bool&#39;: indicating if load power factors can be only lagging (True), or both lagging or leading (False).</li><li>&#39;reset_level::Integer&#39;: determines how to reset the load point to be inside the polytope before sampling. 2: Reset closer to nominal load &amp; chebyshev center, 1: Reset closer to chebyshev center, 0: Reset at chebyshev center.</li><li>&#39;save_certs::Bool&#39;: specifies whether the sampling space, Ax&lt;=b (A &amp; b matrices) are saved to the results dictionary.</li><li>&#39;save_max_load::Bool&#39;: specifies whether the max active load demands used are saved to the results dictionary.</li><li>&#39;model_type::Type&#39;: an abstract PowerModels type indicating the network model to use for the relaxed AC-OPF formulations (Max Load &amp; Nearest Feasible)</li><li>&#39;r_solver&#39;: an optimizer constructor used for solving the relaxed AC-OPF optimization problems.</li><li>&#39;opf_solver&#39;: an optimizer constructor used to find the AC-OPF optimal solution for each sample.</li><li>&#39;print_level::Integer&#39;: from 0 to 3 indicating the level of info to print to console, with 0 indicating minimum printing.</li><li>&#39;stat_track::Integer&#39;: from 0 to 3 indicating the level of stats info saved during each iteration	0: No information saved, 1: Feasibility, New Certificate, Added Sample, Iteration Time, 2: Variance for all input &amp; output variables</li><li>&#39;save_while::Bool&#39;: indicates whether results and stats information is saved to a csv file during processing.</li><li>&#39;save_infeasible::Bool&#39;: indicates if infeasible samples are saved. If true saves infeasible samples in a seperate file from feasible samples.</li><li>&#39;save_path::String:&#39; a string with the file path to the desired result save location.</li><li>&#39;net_path::String&#39;: a string with the file path to the network file. </li><li>&#39;variance::Bool&#39;: indicates if dataset variance information is tracked for each unique active set.</li><li>&#39;discard::Bool&#39;: indicates if samples that do not increase the variance within a unique active set are discarded.</li></ul><p>See &#39;OPF-Learn: An Open-Source Framework for Creating Representative AC Optimal Power Flow Datasets&#39; for more information on how the AC OPF datasets are created. </p><p>Modified from AgenerateACOPFsamples.m written by Ahmed S. Zamzam</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/OPFLearn.jl/blob/092daa4a801a357ddbf35133dc65cf26ca014323/src/create_samples.jl#L24-L71">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OPFLearn.create_samples" href="#OPFLearn.create_samples"><code>OPFLearn.create_samples</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Loads in PowerModels network data given the name of a network case file,  then starts creating samples</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/OPFLearn.jl/blob/092daa4a801a357ddbf35133dc65cf26ca014323/src/create_samples.jl#L1-L4">source</a></section></article><h2 id="Distributed-Processing"><a class="docs-heading-anchor" href="#Distributed-Processing">Distributed Processing</a><a id="Distributed-Processing-1"></a><a class="docs-heading-anchor-permalink" href="#Distributed-Processing" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="OPFLearn.dist_create_samples" href="#OPFLearn.dist_create_samples"><code>OPFLearn.dist_create_samples</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Creates an AC OPF dataset for the given PowerModels network dictionary. Generates samples until one of the given stopping criteria is met.  Takes options to determine how to sample points, what information to save, and what information is printed.</p><p><strong>Arguments</strong></p><ul><li>&#39;net::Dict&#39;: network information stored in a PowerModels.jl format specified dictionary</li><li>&#39;K::Integer&#39;: the maximum number of samples before stopping sampling</li><li>&#39;U::Float&#39;: the minimum % of unique active sets sampled in the previous 1 / U samples to continue sampling</li><li>&#39;S::Float&#39;: the minimum % of saved samples in the previous 1 / L samples to continue sampling</li><li>&#39;V::Float&#39;: the minimum % of feasible samples that increase the variance of the dataset in the previous 1 / L samples to continue sampling</li><li>&#39;T::Integer&#39;: the maximum time for the sampler to run in seconds.</li><li>&#39;max_iter::Integer&#39;: maximum number of iterations for the sampler to run for.</li><li>&#39;nproc::Integer&#39;: the number of processors for the sampler to run with. Defaults to the number reported by Distributed.nprocs().</li><li>&#39;replace_samples::Bool&#39;: whether samples in the samples channel are replaced when a new infeasibility certificate is added. Found to sometimes block progress when turned on.</li><li>&#39;sampler::Function&#39;: the sampling function to use. This function must take arguements A and b, and can take optional arguments.</li><li>&#39;sampler_opts::Dict&#39;: a dictionary of optional arguments to pass to the sampler function.</li><li>&#39;A::Array&#39;: defines the initial sampling space polytope Ax&lt;=b. If not provided, initializes to a default.</li><li>&#39;b::Array&#39;: defines the initial sampling space polytope Ax&lt;=b. If not provided, initializes to a default.</li><li>&#39;pd_max::Array&#39;: the maximum active load values to use when initializing the sampling space and constraining the loads. If nothing, finds the maximum load at each bus with the given relaxed model type.</li><li>&#39;pd_min::Array&#39;: the minimum active load values to use when initializing the sampling space and constraining the loads. If nothing, this is set to 0 for all loads.</li><li>&#39;pf_min::Array/Float:&#39; the minimum power factor for all loads in the system (Number) or an array of minimum power factors for each load in the system.</li><li>&#39;pf_lagging::Bool&#39;: indicating if load power factors can be only lagging (True), or both lagging or leading (False).</li><li>&#39;reset_level::Integer&#39;: determines how to reset the load point to be inside the polytope before sampling. 2: Reset closer to nominal load &amp; chebyshev center, 1: Reset closer to chebyshev center, 0: Reset at chebyshev center.</li><li>&#39;save_certs::Bool&#39;: specifies whether the sampling space, Ax&lt;=b (A &amp; b matrices) are saved to the results dictionary.</li><li>&#39;save_max_load::Bool&#39;: specifies whether the max active load demands used are saved to the results dictionary.</li><li>&#39;model_type::Type&#39;: an abstract PowerModels type indicating the network model to use for the relaxed AC-OPF formulations (Max Load &amp; Nearest Feasible)</li><li>&#39;r_solver&#39;: an optimizer constructor used for solving the relaxed AC-OPF optimization problems.</li><li>&#39;opf_solver&#39;: an optimizer constructor used to find the AC-OPF optimal solution for each sample.</li><li>&#39;print_level::Integer&#39;: from 0 to 3 indicating the level of info to print to console, with 0 indicating minimum printing.</li><li>&#39;stat_track::Integer&#39;: from 0 to 3 indicating the level of stats info saved during each iteration	0: No information saved, 1: Feasibility, New Certificate, Added Sample, Iteration Time, 2: Variance for all input &amp; output variables</li><li>&#39;save_while::Bool&#39;: indicates whether results and stats information is saved to a csv file during processing.</li><li>&#39;save_infeasible::Bool&#39;: indicates if infeasible samples are saved. If true saves infeasible samples in a seperate file from feasible samples.</li><li>&#39;save_path::String:&#39; a string with the file path to the desired result save location.</li><li>&#39;net_path::String&#39;: a string with the file path to the network file. </li><li>&#39;variance::Bool&#39;: indicates if dataset variance information is tracked for each unique active set.</li><li>&#39;discard::Bool&#39;: indicates if samples that do not increase the variance within a unique active set are discarded.</li></ul><p>See &#39;OPF-Learn: An Open-Source Framework for Creating Representative AC Optimal Power Flow Datasets&#39; for more information on how the AC OPF datasets are created. </p><p>Modified from AgenerateACOPFsamples.m written by Ahmed S. Zamzam</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/OPFLearn.jl/blob/092daa4a801a357ddbf35133dc65cf26ca014323/src/create_samples_distributed.jl#L26-L68">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OPFLearn.dist_create_samples" href="#OPFLearn.dist_create_samples"><code>OPFLearn.dist_create_samples</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Loads in PowerModels network data given the name of a network case file,  then starts creating samples with distributed processing</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/OPFLearn.jl/blob/092daa4a801a357ddbf35133dc65cf26ca014323/src/create_samples_distributed.jl#L1-L4">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../python/">« Python Interface</a><a class="docs-footer-nextpage" href="../saving/">Exporting Datasets »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.5 on <span class="colophon-date" title="Monday 18 April 2022 23:29">Monday 18 April 2022</span>. Using Julia version 1.7.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
